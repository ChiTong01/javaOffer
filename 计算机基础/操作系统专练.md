[参考知乎用户：非凡公社](https://www.zhihu.com/question/31032841/answer/668144642)
[参考知乎用户：Android 2012](https://zhuanlan.zhihu.com/p/62219734)

http://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html
锁
进程
内存

本系列类似于面经，旨在简单快捷的回答问题，如果想了解更详细的内容，请跳转至专项区。
### 1. 进程的有哪几种状态，状态转换图，及导致转换的事件。
- 就绪状态：进程已获得除处理机以外的所需资源，等待分配处理机资源
- 运行状态：占用处理机资源运行，处于此状态的进程数小于等于CPU数
- 阻塞状态： 进程等待某种条件，在条件满足之前无法执行
### 2. 进程与线程的区别。
- 进程是具有一定功能的程序关于某个数据集合上的一次运行活动，进程是系统进行资源调度和分配的一个独立单位。
- 线程是进程的实体，是CPU调度和分派的基本单位，它是比进程更小的能独立运行的基本单位。
- 一个进程可以有多个线程，多个线程也可以并发执行
### 3. 进程通信的几种方式?
主要分为：管道、系统IPC（包括消息队列、信号量、共享存储）、SOCKET  

管道主要分为：普通管道PIPE 、流管道（s_pipe）、命名管道（name_pipe）

- 管道是一种半双工的通信方式，数据只能单项流动，并且只能在具有亲缘关系的进程间流动，进程的亲缘关系通常是父子进程
- 命名管道也是半双工的通信方式，它允许无亲缘关系的进程间进行通信
- 信号量是一个计数器，用来控制多个进程对资源的访问，它通常作为一种锁机制。
- 消息队列是消息的链表，存放在内核中并由消息队列标识符标识。
- 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。
- 共享内存就是映射一段能被其它进程访问的内存，这段共享内存由一个进程创建，但是多个进程可以访问。
### 4. 线程同步几种方式。(一定要会写生产者、消费者问题，完全消化理解)
- 互斥量：采用互斥对象机制，只有拥有互斥对象的线程才有访问公共资源的权限。因为互斥对象只有一个，所以可以保证公共资源不会被多个线程同时访问。
- 信号量：它允许同一时刻多个线程访问同一资源，但是需要控制同一时刻访问此资源的最大线程数量。
- 事件（信号）：通过通知操作的方式来保持多线程同步，还可以方便的实现多线程优先级的比较操作。
### 5. 线程的实现方式. (也就是用户线程与内核线程的区别)
### 6. 用户态和核心态的区别。
### 7. 用户栈和内核栈的区别。
### 8. 内存池、进程池、线程池。(c++程序员必须掌握)
### 9. 死锁的概念，导致死锁的原因.
在两个或者多个并发进程中，如果每个进程持有某种资源而又等待其它进程释放它或它们现在保持着的资源，在未改变这种状态之前都不能向前推进，称这一组进程产生了死锁。通俗的讲就是两个或多个进程无限期的阻塞、相互等待的一种状态。
![](https://pic2.zhimg.com/80/v2-315455367f14ecd961834e3de7cf5529_hd.jpg)
### 10. 导致死锁的四个必要条件。
有一个条件不成立，则不会产生死锁
- 互斥条件：一个资源一次只能被一个进程使用
- 请求与保持条件：一个进程因请求资源而阻塞时，对已获得资源保持不放
- 不剥夺条件：进程获得的资源，在未完全使用完之前，不能强行剥夺
- 循环等待条件：若干进程之间形成一种头尾相接的环形等待资源关系
### 11. 处理死锁的四个方式。
>鸵鸟策略、死锁检测与死锁恢复、死锁预防、死锁避免

`鸵鸟策略：`
把头埋在沙子里，假装根本没发生问题。

因为解决死锁问题的代价很高，因此鸵鸟策略这种不采取任务措施的方案会获得更高的性能。

当发生死锁时不会对用户造成多大影响，或发生死锁的概率很低，可以采用鸵鸟策略。

大多数操作系统，包括 Unix，Linux 和 Windows，处理死锁问题的办法仅仅是忽略它
`死锁检查和死锁恢复`：  
不试图阻止死锁，而是当检测到死锁发生时，采取措施进行恢复。

允许死锁发生，在资源不足、利用率下降时或周期性检测系统进展判断是否真的有死锁发生；死锁后解除死锁并以最小的代价恢复系统运行，可通过撤销死锁进程组、回退再启动、按某种原则逐一撤销进程或剥夺资源  
死锁恢复：利用抢占恢复、利用回滚恢复、通过杀死进程恢复
`避免死锁：`  
在程序运行时避免发生死锁
`死锁预防：`
破坏死锁必要条件；
独占转为共享资源，一次性申请和分配、主动释放部分分配，操作系统帮助抢占，资源有序分配法（资源按热度编号，进程按资源号增序请求)
### 13. 进程调度算法。(周转时间 =  程序结束时间 -- 开始服务时间、带权周转时间=  周转时间 /  要求服务时间)
FCFS(先来先服务)，优先级，时间片轮转，多级反馈
### 14. Windows内存管理的方式(块式、页式、段式、段页式).
### 15. 内存连续分配方式采用的几种算法及各自优劣。
### 16. 动态链接及静态链接.
### 17. 基本分页、请求分页储存管理方式。
### 18. 基本分段、请求分段储存管理方式。
### 19. 分段分页方式的比较各自优缺点。
- 段是信息的逻辑单位，它是根据用户的需要划分的，因此段对用户是可见的 ；页是信息的物理单位，是为了管理主存的方便而划分的，对用户是透明的。
- 段的大小不固定，有它所完成的功能决定；页大大小固定，由系统决定
- 段向用户提供二维地址空间；页向用户提供的是一维地址空间
- 段是信息的逻辑单位，便于存储保护和信息的共享，页的保护和共享受到限制。
### 20. 几种页面置换算法，会算所需换页数。(LRU用程序如何实现？)
### 21. 虚拟内存的定义及实现方式。
### 22. 操作系统的四个特性。
### 23. DMA。
### 24. Spooling。
### 25. 外存分配的几种方式，及各种优劣。
### 26. 什么是缓冲区溢出？有什么危害？其原因是什么？
缓冲区溢出是指当计算机向缓冲区填充数据时超出了缓冲区本身的容量，溢出的数据覆盖在合法数据上。

危害有以下两点：

- 程序崩溃，导致拒绝额服务
- 跳转并且执行一段恶意代码
造成缓冲区溢出的主要原因是程序中没有仔细检查用户输入。
### 27. 进程同步有哪几种机制
原子操作、信号量机制、自旋锁管程、会合、分布式系统
### 28，为什么要引入虚拟存储？
在物理上扩展内存相对有限的条件下，应当尝试以一些其他可行的方式在逻辑上来扩充内存
### 29，虚拟内存空间的大小由什么因素决定
① 虚存大小 <= 内存 + 外存容量之和  
② 虚存大小 <= 计算机地址位数所能容纳的大小
### 30，虚拟内存是怎么解决问题的？会带来什么问题？
虚拟内存通过使用外存上的空间来扩充内存的空间，通过一定的换入换出使得整个系统在逻辑上能够使用一个远超粗物理内存的内存容量。如果使用了不当的替换算法，会大大降低系统性能

